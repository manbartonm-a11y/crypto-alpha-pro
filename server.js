const express=require("express"),app=express(),fetch=require("node-fetch");app.get("/",(r,s)=>s.send("OK"));app.get("/telegram",async(req,res)=>{const id=req.query.id||"0",isPremium=id==="777";const paywall=isPremium?"":"<a href=\"https://t.me/CryptoBot?start=pay_to_@crypto_alert_677_bot\" style=\"background:#0f8;color:#000;padding:20px 80px;border-radius:50px;font-size:2em;text-decoration:none;display:inline-block;margin:40px;box-shadow:0 0 40px #0f8;font-weight:bold\">UNLOCK PREMIUM $29/month</a>";const pnl=isPremium?"<div style=\"background:#001a00;padding:30px;border:3px solid #0f8;border-radius:40px;margin:40px auto;max-width:90%;font-size:2.5em;color:#0f8;box-shadow:0 0 60px #0f8\">Portfolio PnL: <span style=color:#0f0>+$12,847</span> (+18.4%)</div>":"";res.send(`<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Crypto Alpha Pro</title><style>body{margin:0;background:#000;color:#0f0;font-family:Arial,sans-serif;text-align:center;padding:20px;background:radial-gradient(circle at center,#001a00,#000)}h1{color:#0ff;font-size:3em;letter-spacing:3px;text-shadow:0 0 30px #0ff}.price{font-size:6em;color:#0ff;margin:20px;text-shadow:0 0 40px #0ff}.change{font-size:2.5em;margin:10px}.chart{border:2px solid #0f8;border-radius:30px;background:#000;box-shadow:0 0 60px #0f8;padding:20px;margin:30px auto;width:95%;max-width:900px}.box{background:#001a00;padding:20px;border-radius:25px;margin:20px auto;max-width:90%;box-shadow:0 0 40px #0f8;font-size:1.4em}.live{color:#0f0;animation:glow 1.5s infinite}@keyframes glow{0%,100%{text-shadow:0 0 20px #0f0}50%{text-shadow:0 0 50px #0f0}}</style></head><body><h1>CRYPTO ALPHA PRO</h1><div class="price" id="price">$91,167</div><div class="change" id="change">24h +4.17%</div><div class="chart"><canvas id="sparkline" height="200"></canvas></div><div class="box live" id="whale">Loading latest whale...</div><div class="box">Next AI Pump Signal: <span style=color:#0ff>4h 21m</span> ? Target $112k+</div>${pnl}${paywall}<script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script>let chart;async function update(){try{const p=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true").then(r=>r.json());document.getElementById("price").innerText="$"+p.bitcoin.usd.toLocaleString();const ch=p.bitcoin.usd_24h_change.toFixed(2);document.getElementById("change").innerHTML="24h "+(ch>0?"<span style=color:#0f0>?"+ch+"%</span>":"<span style=color:#f66>?"+Math.abs(ch)+"%</span>");const hist=await fetch("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=7").then(r=>r.json());const data=hist.prices.map(p=>p[1]);if(chart)chart.destroy();chart=new Chart(document.getElementById("sparkline"),{type:"line",data:{labels:data.map((_,i)=>i),datasets:[{data,data:data,borderColor:"#0f8",backgroundColor:"rgba(0,255,136,0.2)",fill:true,tension:0.4,pointRadius:0,borderWidth:4}]},options:{plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:false}}}});}catch{}}update();setInterval(update,8000);setInterval(async()=>{try{const w=await fetch("https://api.whale-alert.io/v1/transactions?min_value=1000000&limit=1&currency=btc,eth,usdt").then(r=>r.json());if(w.transactions&&w.transactions[0]){const t=w.transactions[0];document.getElementById("whale").innerHTML="WHALE • $"+(t.amount_usd/1000000).toFixed(1)+"M "+t.symbol+" ? "+(t.to?.owner||"unknown")+" <span style=font-size:0.8em>("+(Date.now()/1000-t.timestamp<300?"just now":Math.floor((Date.now()/1000-t.timestamp)/60)+" min ago")+")</span>";}}catch{}},15000);</script></body></html>`);});app.listen(process.env.PORT||10000,"0.0.0.0");
