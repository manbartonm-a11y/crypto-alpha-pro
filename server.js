const express = require("express"); const fetch = require("node-fetch"); const app = express(); app.get("/", (req,res)=>res.send("<h1 style=\"color:#0f0;background:#000;text-align:center;padding:200px;font-family:monospace\">CRYPTO ALPHA PRO LIVE!<br><a href=\"/telegram\" style=\"color:#0ff;font-size:50px\">OPEN DASHBOARD</a></h1>")); app.get("/telegram", async (req,res)=>{ let html = `<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Crypto Alpha Pro</title><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script src="https://telegram.org/js/telegram-web-app.js"></script><style>body{margin:0;background:#000;color:#0f0;font-family:monospace;text-align:center;padding:20px}h1{color:#0ff;font-size:3em}.p{font-size:5.5em;color:#0f9;margin:10px}canvas{width:95%;max-width:600px;height:280px;border:5px solid #0f0;border-radius:20px;margin:40px auto}</style></head><body onload="Telegram.WebApp.ready();Telegram.WebApp.expand()"><h1>CRYPTO ALPHA PRO</h1><div class="p">$69,420</div><div style="font-size:2em">24h <span style=color:#0f0>Up +6.9%</span></div><canvas id="c"></canvas><div style="font-size:1.7em;color:#0f9">Whales buying the dip — next leg up loading</div><script>const fake=[69000,69500,68800,70500,70000,71500,72800,73500,74000,75500,76800,77420];new Chart(document.getElementById("c"),{type:"line",data:{datasets:[{data:fake,borderColor:"#0f0",borderWidth:6,tension:0.4,fill:true,backgroundColor:"rgba(0,255,0,0.3)",pointRadius:0}]},options:{animation:false,plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:false}}}});</script></body></html>`; try{ const [p,c] = await Promise.all([fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true"), fetch("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=7")]); const pd = await p.json(); const cd = await c.json(); const price = pd.bitcoin.usd; const change = pd.bitcoin.usd_24h_change.toFixed(2); const realData = cd.prices.map(x=>x[1]); html = html.replace("$69,420", "$"+Number(price).toLocaleString()).replace("Up +6.9%", change>0?"Up +"+change+"%":"Down "+Math.abs(change)+"%").replace("color:#0f0","color:"+(change>0?"#0f0":"#f66")).replace("fake", JSON.stringify(realData)); }catch(e){} res.send(html); }); const PORT = process.env.PORT || 10000; app.listen(PORT, "0.0.0.0", () => console.log("LIVE WITH REAL DATA"));
