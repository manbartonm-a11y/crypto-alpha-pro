const express = require("express"); const fetch = require("node-fetch"); const app = express(); let portfolios = {}; app.get("/", (req,res)=>res.send("<h1 style=\"color:#0f0;background:#000;text-align:center;padding:200px;font-family:monospace\">CRYPTO ALPHA PRO LIVE!<br><a href=\"/telegram\" style=\"color:#0ff;font-size:50px\">OPEN DASHBOARD</a></h1>")); app.get("/telegram", async (req,res)=>{ let userId = req.query.id || "demo"; let price = "$108,420"; let change = "+6.9"; let color = "#0f0"; let ai = "Whales buying the dip — next leg up loading"; try{ const d = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true").then(r=>r.json()); price = "$"+Number(d.bitcoin.usd).toLocaleString(); const ch = d.bitcoin.usd_24h_change.toFixed(2); change = ch>0?"+"+ch:""+ch; color = ch>0?"#0f0":"#f66"; if(Math.random()<0.4) ai = "Whale Alert: 1,247 BTC just moved — accumulation phase"; }catch(e){} const portfolio = portfolios[userId] || []; const holdings = portfolio.map(h=>`<div style=\"margin:8px\">${h.amt} ${h.coin.toUpperCase()} @ $${h.buy} ? $${h.current||h.buy}</div>`).join("") || "<div style=\"color:#0ff\">Use /add btc 0.1 67000</div>"; res.send(`<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Crypto Alpha Pro</title><script src="https://telegram.org/js/telegram-web-app.js"></script><style>body{margin:0;background:#000;color:#0f0;font-family:monospace;text-align:center;padding:20px}h1{color:#0ff;font-size:3em}.p{font-size:5.5em;color:#0f9}svg{width:95%;max-width:600px;height:300px;border:6px solid #0f0;border-radius:20px;margin:40px auto;display:block}.btn{background:#0f0;color:#000;padding:15px 30px;border-radius:20px;font-weight:bold;margin:20px}</style></head><body onload="Telegram.WebApp.ready();Telegram.WebApp.expand()"><h1>CRYPTO ALPHA PRO</h1><div class="p">${price}</div><div style="font-size:2em;color:${color}">24h ${change}%</div><svg viewBox="0 0 600 300"><defs><linearGradient id="g" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#0f0"/><stop offset="100%" stop-color="#000"/></linearGradient></defs><path d="M0,250 Q100,200 150,180 Q250,140 350,100 Q450,70 550,40 L600,30 L600,300 L0,300 Z" fill="url(#g)" opacity="0.4"/><path d="M0,250 Q100,200 150,180 Q250,140 350,100 Q450,70 550,40 L600,30" stroke="#0f0" stroke-width="8" fill="none"/></svg><div style="font-size:1.8em;color:#0f9">${ai}</div><div style="background:rgba(0,255,0,0.1);padding:20px;border-radius:20px;margin:20px"><b>Your Portfolio</b><br>${holdings}</div><a href="https://t.me/yourpaymentbot" class="btn">UPGRADE TO PREMIUM — $29/month</a></body></html>`); }); const PORT=process.env.PORT||10000; app.listen(PORT,"0.0.0.0");
