const express = require("express"); const fetch = require("node-fetch"); const app = express(); app.use(express.json()); let portfolios = {}; app.get("/", (req,res)=>res.send("<h1 style=\"color:#0f0;background:#000;text-align:center;padding:200px;font-family:monospace\">CRYPTO ALPHA PRO LIVE!<br><a href=\"/telegram\" style=\"color:#0ff;font-size:50px\">OPEN DASHBOARD</a></h1>")); app.get("/telegram", async (req,res)=>{ const user = req.query.id || "guest"; let price = "$69,420"; let change = "Up +6.9%"; let color = "#0f0"; let ai = "Whales are accumulating heavily — next leg up imminent."; let portfolio = portfolios[user] || []; let pnl = 0; try{ const data = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana&vs_currencies=usd&include_24hr_change=true").then(r=>r.json()); price = "$"+Number(data.bitcoin.usd).toLocaleString(); const ch = data.bitcoin.usd_24h_change.toFixed(2); change = ch>0?"Up +"+ch+"%":"Down "+Math.abs(ch)+"%"; color = ch>0?"#0f0":"#f66"; if(Math.random()<0.3) ai = "Whale alert: 1,247 BTC moved to cold storage — accumulation confirmed."; portfolio.forEach(h=>{const p=data[h.coin]?.usd||0; pnl += (p-h.buy)*h.amount;}); }catch(e){} const holdings = portfolio.map(h=>`<div style=\"margin:10px;font-size:1.4em\">${h.amount} ${h.coin.toUpperCase()} @ $${h.buy} ? $${(data[h.coin]?.usd||h.buy).toFixed(2)}</div>`).join("") || "<div style=\"color:#0ff\">Add holdings with /add btc 0.1 67000</div>"; res.send(`<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Crypto Alpha Pro</title><script src="https://telegram.org/js/telegram-web-app.js"></script><style>body{margin:0;background:#000;color:#0f0;font-family:monospace;text-align:center;padding:20px}h1{color:#0ff;font-size:3em}.p{font-size:5em;color:#0f9}a{color:#0ff;text-decoration:none;font-size:1.5em}</style></head><body onload="Telegram.WebApp.ready();Telegram.WebApp.expand()"><h1>CRYPTO ALPHA PRO</h1><div class="p">${price}</div><div style="font-size:2em;color:${color}">24h ${change}</div><img src="https://i.ibb.co/4p3vK7f/green-chart.png" style="width:95%;max-width:600px;border:6px solid #0f0;border-radius:20px;margin:30px auto"><div style="font-size:1.8em;color:#0f9;margin:20px">${ai}</div><div style="background:rgba(0,255,0,0.1);padding:20px;border-radius:20px;margin:20px"><b>Your Portfolio ${pnl>0?"(+"+pnl.toFixed(2)+"$)":"("+pnl.toFixed(2)+"$)"}</b><br>${holdings}</div><a href="https://yourpaymentlink.com">Upgrade to Premium ? $29/month</a><div style="margin-top:30px;color:#666;font-size:0.9em">© 2025 Crypto Alpha Pro</div></body></html>`); }); app.post("/add", (req,res)=>{ const {user,coin,amount,buy} = req.body; if(!portfolios[user]) portfolios[user]=[]; portfolios[user].push({coin,amount:parseFloat(amount),buy:parseFloat(buy)}); res.send("Added!"); }); const PORT=process.env.PORT||10000; app.listen(PORT,"0.0.0.0",()=>console.log("FULL PREMIUM PRODUCT LIVE"));
